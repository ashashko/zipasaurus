<!doctype html>
<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA5tcMex0mrOzNtbm8jgTNZNs9xzTJZ1Uw&sensor=false">
    </script>
        
<script type="text/javascript">
$(document).ready(function(){
	//initialize();
    var myLat_1 = new Array();
    var myLong_1 = new Array();
    $('.input-box').hide();
    $('#ZipCode').show();
     
   $('#method').change(function() {
      $('.input-box').hide();
      $('#' + $(this).val()).show();
   });
   
   $('.input-box').change(function() {
     console.log('value ', $(this).val());
		$.ajax({
		  type: "GET",
		  url: $(this).val(),
		  dataType: 'jsonp',
		  error: function(jqXHR, textStatus, errorThrown){
			  console.log(jqXHR, textStatus, errorThrown);
		  },
		  success: function(data){
			  console.log('ajax function >> ', data);
			  updateResponse(data)
		  }
		});
	})
	function initialize() {
		var myLat = myLat_1;
        var myLong = myLong_1;
        //alert(myLat);
	    var mapOptions = {
	      center: new google.maps.LatLng(myLat, myLong),
	      zoom: 8,
	      mapTypeId: google.maps.MapTypeId.ROADMAP
	    };
	    var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
	  var marker = new google.maps.Marker({
                                                    position: new google.maps.LatLng(myLat, myLong),
                                                    map: map,
                                                   // title:"Hello World!"
                                                    });
       
	  }
		// for (i = 0; i < 10/*NEWARRAY.length*/; i++) {  
	    //  marker = new google.maps.Marker({
	    //    position: new google.maps.LatLng(myLat[i], myLong[i]),
	    //    map: map
	        
	    //  });
	     // alert('inside loop');
	    //  console.log(myLat_1);
	    //  }*/
	 // }
	function updateResponse(jsonData) {
	    //Start to build your response html
		var responseHTML = "";
		
		if($(jsonData).length > 1){
		  //Array of objects, need to iterate over each one and pull out the properties and values
		  responseHTML += "<li><p>[</p></li>";
		  //Loop through the arrays
		  $.each(jsonData, function(arrIndex, arrObject) {
			// console.log('index >> ', arrIndex, ' object inside array >> ', arrObject);
			 responseHTML += "<li><p>{</p></li>";
			 //We're inside the array, so go inside the object and loop through each one to pull out the keys(properties) and values
			$.each(arrObject, function(key, value){
				//getting the lat and lng to plug into google maps
			  	if(key == 'lat'){
			  		myLat_1 = value;
			  	}else if(key == 'lng'){
			  		myLong_1 = value;
			  	}
			  	responseHTML += "<li><p> " + key +" : " + value + ", </p></li>";
			});	
			responseHTML += "<li><p>},</p></li>";
		 });
		 responseHTML += "<li><p>]</p></li>";
		$(".response ol").html(responseHTML);	
		} else{
		  //No array, it's a simple object, so just loop through the object's keys(properties) and values
		  iterateOnObject(jsonData);
		}
		initialize();
	}
		
	function iterateOnObject(objectData) {
		var responseHTML = "<li><p>{</p></li>";		
		$.each(objectData, function(i, item){
			//getting the lat and lng to plug into google maps
			if(i == 'lat'){
				myLat_1 = item;
			  	}else if(i == 'lng'){
			  	myLong_1 = item;
			  	}
			 responseHTML += "<li><p> " + i +" : " + item + ", </p></li>";
		});
		responseHTML += "<li><p>}</p></li>";
		$(".response ol").html(responseHTML);
	}
});

</script>

</head>


<body>
<section class="wrapper">
	<header>
		<hgroup>
			<h1>zipasaur.us</h1>
			<h4>-----------------RESTful Zip Code API------</h4>
		</hgroup>
	</header>
	<section class="welcome">
		<h2>Welcome</h2>
		<p>
		zipasaur.us is a dead-simple API for retrieving zip code information about a given city, state, or zip in a speedy manner. Documentation here, although the entire API is listed below. The aim was to be as RESTful and easy to use as possible. Performance and technical/implementation details here. Special thanks to AJ Austinson and Lindsey Kirkbride for the logo!
		</p>
	
	</section>
	
	
	<section class="getting-started">
		<h3>Getting Started</h3>
		<p>
			Choose from one of the following from the menu below.
			</p>
			<select id="method" name="method" class="form-alpha">
				<option value="ZipCode" selected="selected">Zip Code</option>
				<option value="City" >City</option>
				<option value="County" >County</option>
				<option value="State" >State</option>
			</select>
			<br>
	    <input class="input-box" id="ZipCode" value="http://zipasaur.us/api/zipinfo/byzip/97209" name="" type="text">
	    <input class="input-box" id="State" value="http://zipasaur.us/api/zipinfo/bystate/or" name="" type="text">
	    <input class="input-box" id="City" value="http://zipasaur.us/api/zipinfo/bystate/or/bycity/portland" name="" type="text">
	    <input class="input-box" id="County" value="http://zipasaur.us/api/zipinfo/bystate/or/bycity/portland/bycounty/multnomah" name="" type="text">
	</section>
	<aside id="map_canvas">
	
	</aside>
	 <div class="clear-both"></div>
	<section class="response">
		<h3>Response</h3>
		<p>
		All zip code documents returned are JSON objects that look like the following:
		</p>
		<ol>
			<li><p>{</p></li> 
			<li><p>"city":"PORTLAND",</p></li>
			<li><p>"code":"97209",</p></li>
			<li><p id="Long">"lng":"-122.683826",</p></li>
			<li><p>"county":"MULTNOMAH",</p></li>
			<li><p id="Lat">"lat":"+45.531990",</p></li>
			<li><p>"state":"OR" </p></li>
			<li><p>}</p></li>
		</ol>
	</section>

	<footer>
	
	</footer>
	
	







</section>
</body>
</html>